import{_ as l,r,o,c as d,a,d as e,w as t,b as n,e as i}from"./app-2H8C6pDE.js";const c={},p=i(`<h1 id="é‡åŒ–äº¤æ˜“å¹³å°ç›‘æ§è¿ç»´æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#é‡åŒ–äº¤æ˜“å¹³å°ç›‘æ§è¿ç»´æŒ‡å—" aria-hidden="true">#</a> é‡åŒ–äº¤æ˜“å¹³å°ç›‘æ§è¿ç»´æŒ‡å—</h1><h2 id="ğŸ“Š-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-æ¦‚è¿°" aria-hidden="true">#</a> ğŸ“Š æ¦‚è¿°</h2><p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»é‡åŒ–äº¤æ˜“å¹³å°çš„ç›‘æ§ä½“ç³»éƒ¨ç½²ã€é…ç½®å’Œè¿ç»´ï¼ŒåŒ…æ‹¬ Prometheusã€Grafana å’Œ Loki çš„å®Œæ•´é…ç½®æµç¨‹å’Œå¸¸è§é—®é¢˜æ’æŸ¥ã€‚</p><h2 id="ğŸ—ï¸-ç›‘æ§æ¶æ„" tabindex="-1"><a class="header-anchor" href="#ğŸ—ï¸-ç›‘æ§æ¶æ„" aria-hidden="true">#</a> ğŸ—ï¸ ç›‘æ§æ¶æ„</h2><div class="language-mermaid line-numbers-mode" data-ext="mermaid"><pre class="language-mermaid"><code><span class="token keyword">graph</span> TB
    <span class="token keyword">subgraph</span> <span class="token string">&quot;å¾®æœåŠ¡å±‚&quot;</span>
        SCHED<span class="token text string">[Scheduler Service&lt;br/&gt;:8085]</span>
        STOCK<span class="token text string">[Stock Service&lt;br/&gt;:8082]</span>
        TRADE<span class="token text string">[Trading Service&lt;br/&gt;:8083]</span>
    <span class="token keyword">end</span>

    <span class="token keyword">subgraph</span> <span class="token string">&quot;ç›‘æ§å±‚ (Docker)&quot;</span>
        PROM<span class="token text string">[Prometheus&lt;br/&gt;:9091&lt;br/&gt;æŒ‡æ ‡é‡‡é›†]</span>
        GRAF<span class="token text string">[Grafana&lt;br/&gt;:3001&lt;br/&gt;å¯è§†åŒ–]</span>
        LOKI<span class="token text string">[Loki&lt;br/&gt;:3100&lt;br/&gt;æ—¥å¿—èšåˆ]</span>
    <span class="token keyword">end</span>

    SCHED <span class="token arrow operator">--&gt;</span><span class="token label property">|/actuator/prometheus|</span> PROM
    STOCK <span class="token arrow operator">--&gt;</span><span class="token label property">|/actuator/prometheus|</span> PROM
    TRADE <span class="token arrow operator">--&gt;</span><span class="token label property">|/actuator/prometheus|</span> PROM

    PROM <span class="token arrow operator">--&gt;</span> GRAF
    LOKI <span class="token arrow operator">--&gt;</span> GRAF

    SCHED <span class="token arrow operator">-.-&gt;</span><span class="token label property">|æ—¥å¿—|</span> LOKI
    STOCK <span class="token arrow operator">-.-&gt;</span><span class="token label property">|æ—¥å¿—|</span> LOKI
    TRADE <span class="token arrow operator">-.-&gt;</span><span class="token label property">|æ—¥å¿—|</span> LOKI
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›‘æ§ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§ç»„ä»¶" aria-hidden="true">#</a> ç›‘æ§ç»„ä»¶</h3><table><thead><tr><th>ç»„ä»¶</th><th>ç«¯å£</th><th>ç”¨é€”</th><th>è®¿é—®åœ°å€</th></tr></thead><tbody><tr><td><strong>Prometheus</strong></td><td>9091</td><td>æ—¶åºæ•°æ®åº“ï¼ŒæŒ‡æ ‡é‡‡é›†</td><td>http://localhost:9091</td></tr><tr><td><strong>Grafana</strong></td><td>3001</td><td>å¯è§†åŒ–ç›‘æ§é¢æ¿</td><td>http://localhost:3001</td></tr><tr><td><strong>Loki</strong></td><td>3100</td><td>æ—¥å¿—èšåˆç³»ç»Ÿ</td><td>http://localhost:3100</td></tr></tbody></table><h2 id="ğŸš€-å¿«é€Ÿå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#ğŸš€-å¿«é€Ÿå¯åŠ¨" aria-hidden="true">#</a> ğŸš€ å¿«é€Ÿå¯åŠ¨</h2><h3 id="å‰ç½®æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#å‰ç½®æ¡ä»¶" aria-hidden="true">#</a> å‰ç½®æ¡ä»¶</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>âœ… Docker å·²å®‰è£…å¹¶è¿è¡Œ
âœ… è‡³å°‘ä¸€ä¸ªå¾®æœåŠ¡å·²å¯åŠ¨ï¼ˆæ¨èå…ˆå¯åŠ¨ Scheduler Serviceï¼‰
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ³•1-ä½¿ç”¨å¯åŠ¨è„šæœ¬-æ¨è" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•1-ä½¿ç”¨å¯åŠ¨è„šæœ¬-æ¨è" aria-hidden="true">#</a> æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ä»é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ</span>
<span class="token builtin class-name">cd</span> /Users/youweichen/quant-trading-platform
./start-monitoring.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ³•2-æ‰‹åŠ¨å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•2-æ‰‹åŠ¨å¯åŠ¨" aria-hidden="true">#</a> æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># è¿›å…¥ç›‘æ§é…ç½®ç›®å½•</span>
<span class="token builtin class-name">cd</span> infrastructure/monitoring

<span class="token comment"># æ‹‰å–æœ€æ–°é•œåƒ</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml pull

<span class="token comment"># å¯åŠ¨æ‰€æœ‰ç›‘æ§æœåŠ¡</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml up <span class="token parameter variable">-d</span>

<span class="token comment"># æŸ¥çœ‹å¯åŠ¨çŠ¶æ€</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="éªŒè¯å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#éªŒè¯å¯åŠ¨" aria-hidden="true">#</a> éªŒè¯å¯åŠ¨</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ£€æŸ¥ Prometheus</span>
<span class="token function">curl</span> http://localhost:9091/-/healthy

<span class="token comment"># æ£€æŸ¥ Grafana</span>
<span class="token function">curl</span> http://localhost:3001/api/health

<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> quant
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¢„æœŸè¾“å‡ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>quant-prometheus   Up   0.0.0.0:9091-&gt;9090/tcp
quant-grafana      Up   0.0.0.0:3001-&gt;3000/tcp
quant-loki         Up   0.0.0.0:3100-&gt;3100/tcp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="âš™ï¸-é…ç½®è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#âš™ï¸-é…ç½®è¯¦è§£" aria-hidden="true">#</a> âš™ï¸ é…ç½®è¯¦è§£</h2><h3 id="_1-prometheus-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-prometheus-é…ç½®" aria-hidden="true">#</a> 1. Prometheus é…ç½®</h3><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<code>infrastructure/prometheus/prometheus.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 15s      <span class="token comment"># æ¯15ç§’é‡‡é›†ä¸€æ¬¡æŒ‡æ ‡</span>
  <span class="token key atrule">evaluation_interval</span><span class="token punctuation">:</span> 15s  <span class="token comment"># æ¯15ç§’è¯„ä¼°ä¸€æ¬¡å‘Šè­¦è§„åˆ™</span>

<span class="token key atrule">scrape_configs</span><span class="token punctuation">:</span>
  <span class="token comment"># Scheduler Service ç›‘æ§</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;scheduler-service&#39;</span>
    <span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> <span class="token string">&#39;/actuator/prometheus&#39;</span>
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;192.168.1.3:8085&#39;</span><span class="token punctuation">]</span>  <span class="token comment"># ä½¿ç”¨æœ¬æœºIP</span>
        <span class="token key atrule">labels</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">&#39;scheduler&#39;</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span> <span class="token string">&#39;dev&#39;</span>

  <span class="token comment"># Trading Service ç›‘æ§</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;trading-service&#39;</span>
    <span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> <span class="token string">&#39;/actuator/prometheus&#39;</span>
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;192.168.1.3:8083&#39;</span><span class="token punctuation">]</span>
        <span class="token key atrule">labels</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">&#39;trading&#39;</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span> <span class="token string">&#39;dev&#39;</span>

  <span class="token comment"># Stock Service ç›‘æ§</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;stock-service&#39;</span>
    <span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> <span class="token string">&#39;/actuator/prometheus&#39;</span>
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;192.168.1.3:8082&#39;</span><span class="token punctuation">]</span>
        <span class="token key atrule">labels</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">&#39;stock&#39;</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span> <span class="token string">&#39;dev&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>âš ï¸ é‡è¦æç¤º</strong>ï¼š</p><ul><li><strong>ä¸è¦ä½¿ç”¨ <code>host.docker.internal</code></strong>ï¼Œåœ¨ macOS Docker ä¸­å¯èƒ½æ— æ³•è§£æ</li><li><strong>ä½¿ç”¨æœ¬æœºå®é™… IP åœ°å€</strong>ï¼ˆé€šè¿‡ <code>ipconfig getifaddr en0</code> è·å–ï¼‰</li><li>ä¿®æ”¹é…ç½®åéœ€é‡å¯ï¼š<code>docker compose -f docker-compose.monitoring.yml restart prometheus</code></li></ul><h3 id="_2-grafana-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-grafana-é…ç½®" aria-hidden="true">#</a> 2. Grafana é…ç½®</h3><p><strong>æ•°æ®æºé…ç½®</strong>ï¼š<code>infrastructure/grafana/provisioning/datasources/prometheus.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">datasources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Prometheus
    <span class="token key atrule">type</span><span class="token punctuation">:</span> prometheus
    <span class="token key atrule">access</span><span class="token punctuation">:</span> proxy
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//prometheus<span class="token punctuation">:</span><span class="token number">9090</span>  <span class="token comment"># Dockerå†…éƒ¨ç½‘ç»œåœ°å€</span>
    <span class="token key atrule">isDefault</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">editable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">jsonData</span><span class="token punctuation">:</span>
      <span class="token key atrule">timeInterval</span><span class="token punctuation">:</span> 15s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Dashboard è‡ªåŠ¨åŠ è½½</strong>ï¼š<code>infrastructure/grafana/provisioning/dashboards/dashboard-provider.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">providers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#39;Scheduler Dashboards&#39;</span>
    <span class="token key atrule">orgId</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">folder</span><span class="token punctuation">:</span> <span class="token string">&#39;Quant Platform&#39;</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> file
    <span class="token key atrule">disableDeletion</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">updateIntervalSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token key atrule">allowUiUpdates</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">options</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /var/lib/grafana/dashboards
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç™»å½•å‡­æ®</strong>ï¼š</p><ul><li>ç”¨æˆ·åï¼š<code>admin</code></li><li>å¯†ç ï¼š<code>admin123</code></li></ul><h3 id="_3-docker-compose-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-docker-compose-é…ç½®" aria-hidden="true">#</a> 3. Docker Compose é…ç½®</h3><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<code>infrastructure/monitoring/docker-compose.monitoring.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/prometheus<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> quant<span class="token punctuation">-</span>prometheus
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9091:9090&quot;</span>  <span class="token comment"># é¿å…ä¸ ClashX å†²çª</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ../prometheus/prometheus.yml<span class="token punctuation">:</span>/etc/prometheus/prometheus.yml
      <span class="token punctuation">-</span> prometheus<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/prometheus
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;--config.file=/etc/prometheus/prometheus.yml&#39;</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;--storage.tsdb.retention.time=30d&#39;</span>  <span class="token comment"># ä¿ç•™30å¤©æ•°æ®</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped

  <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> quant<span class="token punctuation">-</span>grafana
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3001:3000&quot;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_USER=admin
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_PASSWORD=admin123
      <span class="token punctuation">-</span> GF_USERS_ALLOW_SIGN_UP=false
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> grafana<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/grafana
      <span class="token punctuation">-</span> ../grafana/provisioning/dashboards<span class="token punctuation">:</span>/etc/grafana/provisioning/dashboards
      <span class="token punctuation">-</span> ../grafana/provisioning/datasources<span class="token punctuation">:</span>/etc/grafana/provisioning/datasources
      <span class="token punctuation">-</span> ../grafana/dashboards<span class="token punctuation">:</span>/var/lib/grafana/dashboards
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> prometheus

  <span class="token key atrule">loki</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/loki<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> quant<span class="token punctuation">-</span>loki
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3100:3100&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ../loki/loki<span class="token punctuation">-</span>config.yml<span class="token punctuation">:</span>/etc/loki/local<span class="token punctuation">-</span>config.yaml
      <span class="token punctuation">-</span> loki<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/loki
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>config.file=/etc/loki/local<span class="token punctuation">-</span>config.yaml
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">monitoring</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">grafana-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">loki-data</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”-ä½¿ç”¨æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#ğŸ”-ä½¿ç”¨æŒ‡å—" aria-hidden="true">#</a> ğŸ” ä½¿ç”¨æŒ‡å—</h2><h3 id="prometheus-æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#prometheus-æŸ¥è¯¢" aria-hidden="true">#</a> Prometheus æŸ¥è¯¢</h3><p>è®¿é—® http://localhost:9091 å¹¶æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢ï¼š</p><h4 id="_1-æ£€æŸ¥æ‰€æœ‰ç›‘æ§ç›®æ ‡çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_1-æ£€æŸ¥æ‰€æœ‰ç›‘æ§ç›®æ ‡çŠ¶æ€" aria-hidden="true">#</a> 1. æ£€æŸ¥æ‰€æœ‰ç›‘æ§ç›®æ ‡çŠ¶æ€</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿”å›å€¼ <code>1</code> è¡¨ç¤ºæœåŠ¡æ­£å¸¸ï¼Œ<code>0</code> è¡¨ç¤ºæœåŠ¡ä¸å¯è¾¾ã€‚</p><h4 id="_2-æŸ¥çœ‹-scheduler-service-æ‰€æœ‰æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#_2-æŸ¥çœ‹-scheduler-service-æ‰€æœ‰æŒ‡æ ‡" aria-hidden="true">#</a> 2. æŸ¥çœ‹ Scheduler Service æ‰€æœ‰æŒ‡æ ‡</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code><span class="token context-labels"><span class="token punctuation">{</span><span class="token label-key attr-name">application</span><span class="token punctuation">=</span><span class="token label-value attr-value">&quot;scheduler-service&quot;</span><span class="token punctuation">}</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-jvm-å†…å­˜ä½¿ç”¨æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_3-jvm-å†…å­˜ä½¿ç”¨æƒ…å†µ" aria-hidden="true">#</a> 3. JVM å†…å­˜ä½¿ç”¨æƒ…å†µ</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>jvm_memory_used_bytes<span class="token context-labels"><span class="token punctuation">{</span><span class="token label-key attr-name">application</span><span class="token punctuation">=</span><span class="token label-value attr-value">&quot;scheduler-service&quot;</span><span class="token punctuation">}</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-ä»·æ ¼æ›´æ–°æ€»æ¬¡æ•°" tabindex="-1"><a class="header-anchor" href="#_4-ä»·æ ¼æ›´æ–°æ€»æ¬¡æ•°" aria-hidden="true">#</a> 4. ä»·æ ¼æ›´æ–°æ€»æ¬¡æ•°</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>scheduler_price_updates_total
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-æˆåŠŸç‡è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#_5-æˆåŠŸç‡è®¡ç®—" aria-hidden="true">#</a> 5. æˆåŠŸç‡è®¡ç®—</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code><span class="token punctuation">(</span>scheduler_price_updates_total <span class="token operator">-</span> scheduler_price_updates_failed<span class="token punctuation">)</span>
<span class="token operator">/</span> scheduler_price_updates_total <span class="token operator">*</span> <span class="token number">100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-æ¯åˆ†é’Ÿæ›´æ–°é€Ÿç‡" tabindex="-1"><a class="header-anchor" href="#_6-æ¯åˆ†é’Ÿæ›´æ–°é€Ÿç‡" aria-hidden="true">#</a> 6. æ¯åˆ†é’Ÿæ›´æ–°é€Ÿç‡</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code><span class="token function">rate</span><span class="token punctuation">(</span>scheduler_price_updates_total<span class="token context-range"><span class="token punctuation">[</span><span class="token range-duration number">1m</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_7-ai-çƒ­åº¦åˆ†å¸ƒ" tabindex="-1"><a class="header-anchor" href="#_7-ai-çƒ­åº¦åˆ†å¸ƒ" aria-hidden="true">#</a> 7. AI çƒ­åº¦åˆ†å¸ƒ</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>scheduler_ai_hotness_super_hot
scheduler_ai_hotness_hot
scheduler_ai_hotness_normal
scheduler_ai_hotness_cold
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-å½“å‰ç›‘æ§è‚¡ç¥¨æ•°" tabindex="-1"><a class="header-anchor" href="#_8-å½“å‰ç›‘æ§è‚¡ç¥¨æ•°" aria-hidden="true">#</a> 8. å½“å‰ç›‘æ§è‚¡ç¥¨æ•°</h4><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>scheduler_monitored_stocks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="grafana-dashboard" tabindex="-1"><a class="header-anchor" href="#grafana-dashboard" aria-hidden="true">#</a> Grafana Dashboard</h3><h4 id="å¯¼å…¥é¢„é…ç½®-dashboard" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥é¢„é…ç½®-dashboard" aria-hidden="true">#</a> å¯¼å…¥é¢„é…ç½® Dashboard</h4><ol><li>è®¿é—® http://localhost:3001</li><li>ä½¿ç”¨ <code>admin/admin123</code> ç™»å½•</li><li>ç‚¹å‡»å·¦ä¾§ <strong>Dashboards</strong> â†’ <strong>Import</strong></li><li>é€‰æ‹©æ–‡ä»¶ï¼š<code>infrastructure/grafana/dashboards/scheduler-monitor.json</code></li><li>é€‰æ‹©æ•°æ®æºï¼š<strong>Prometheus</strong></li><li>ç‚¹å‡» <strong>Import</strong></li></ol><h4 id="dashboard-é¢æ¿è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#dashboard-é¢æ¿è¯´æ˜" aria-hidden="true">#</a> Dashboard é¢æ¿è¯´æ˜</h4><table><thead><tr><th>é¢æ¿åç§°</th><th>ç±»å‹</th><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ€»æ›´æ–°æ¬¡æ•°</td><td>Stat</td><td><code>scheduler_price_updates_total</code></td><td>ç´¯è®¡ä»·æ ¼æ›´æ–°æ¬¡æ•°</td></tr><tr><td>æˆåŠŸç‡</td><td>Gauge</td><td><code>(æˆåŠŸ/æ€»æ•°)Ã—100</code></td><td>å®æ—¶æˆåŠŸç‡ï¼Œ&lt;95%å‘Šè­¦</td></tr><tr><td>ç›‘æ§è‚¡ç¥¨æ•°</td><td>Stat</td><td><code>scheduler_monitored_stocks</code></td><td>å½“å‰ç›‘æ§çš„è‚¡ç¥¨æ•°é‡</td></tr><tr><td>æ›´æ–°é¢‘ç‡</td><td>Time Series</td><td><code>rate(updates[1m])</code></td><td>æ¯åˆ†é’Ÿæ›´æ–°è¶‹åŠ¿</td></tr><tr><td>å¤±è´¥ç‡è¶‹åŠ¿</td><td>Time Series</td><td><code>rate(failed[5m])</code></td><td>å¤±è´¥ç‡å˜åŒ–æ›²çº¿</td></tr><tr><td>çƒ­åº¦åˆ†å¸ƒ</td><td>Pie Chart</td><td><code>ai_hotness_*</code></td><td>å„çƒ­åº¦ç­‰çº§è‚¡ç¥¨å æ¯”</td></tr><tr><td>Top 10è‚¡ç¥¨</td><td>Table</td><td><code>topk(10, update_count)</code></td><td>æ›´æ–°æœ€é¢‘ç¹çš„è‚¡ç¥¨</td></tr><tr><td>å“åº”æ—¶é—´</td><td>Graph</td><td><code>duration_seconds</code></td><td>å¹³å‡å¤„ç†è€—æ—¶</td></tr><tr><td>å®æ—¶æ—¥å¿—</td><td>Logs</td><td>Loki</td><td>æœåŠ¡æ—¥å¿—æµ</td></tr></tbody></table><h2 id="ğŸ›-æ•…éšœæ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#ğŸ›-æ•…éšœæ’æŸ¥" aria-hidden="true">#</a> ğŸ› æ•…éšœæ’æŸ¥</h2><h3 id="é—®é¢˜1-ç«¯å£å†²çª-9090-è¢«å ç”¨" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜1-ç«¯å£å†²çª-9090-è¢«å ç”¨" aria-hidden="true">#</a> é—®é¢˜1ï¼šç«¯å£å†²çªï¼ˆ9090 è¢«å ç”¨ï¼‰</h3><p><strong>ç°è±¡</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:9090
<span class="token comment"># è¿”å›: {&quot;hello&quot;: &quot;clash&quot;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŸå› </strong>ï¼šClashX ä»£ç†å ç”¨äº† 9090 ç«¯å£</p><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p><p>æ–¹æ³•A - ä¿®æ”¹ Prometheus ç«¯å£ï¼ˆæ¨èï¼‰ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># docker-compose.monitoring.yml</span>
<span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;9091:9090&quot;</span>  <span class="token comment"># æ”¹ç”¨9091ç«¯å£</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–¹æ³•B - å…³é—­ ClashX 9090 ç«¯å£ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åœ¨ ClashX è®¾ç½®ä¸­ä¿®æ”¹å¤–éƒ¨æ§åˆ¶å™¨ç«¯å£</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é—®é¢˜2-prometheus-æ— æ³•é‡‡é›†æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜2-prometheus-æ— æ³•é‡‡é›†æŒ‡æ ‡" aria-hidden="true">#</a> é—®é¢˜2ï¼šPrometheus æ— æ³•é‡‡é›†æŒ‡æ ‡</h3><p><strong>ç°è±¡</strong>ï¼š</p><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>up<span class="token context-labels"><span class="token punctuation">{</span><span class="token label-key attr-name">job</span><span class="token punctuation">=</span><span class="token label-value attr-value">&quot;scheduler-service&quot;</span><span class="token punctuation">}</span></span>  # è¿”å›ç©ºç»“æœ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>è¯Šæ–­æ­¥éª¤</strong>ï¼š</p><ol><li><strong>æ£€æŸ¥æœåŠ¡æ˜¯å¦æš´éœ²æŒ‡æ ‡</strong>ï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:8085/actuator/prometheus
<span class="token comment"># åº”è¿”å›å¤§é‡æŒ‡æ ‡æ•°æ®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p><strong>æ£€æŸ¥ Prometheus targets çŠ¶æ€</strong>ï¼š è®¿é—® http://localhost:9091/targets æŸ¥çœ‹ scheduler-service çŠ¶æ€æ˜¯å¦ä¸º <strong>UP</strong></p></li><li><p><strong>æ£€æŸ¥ Docker ç½‘ç»œè¿é€šæ€§</strong>ï¼š</p></li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> quant-prometheus <span class="token function">wget</span> -qO- http://192.168.1.3:8085/actuator/prometheus
<span class="token comment"># å¦‚æœå¤±è´¥ï¼Œè¯´æ˜ç½‘ç»œä¸é€š</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¸è§åŸå› åŠè§£å†³</strong>ï¼š</p><h4 id="åŸå› a-ä½¿ç”¨äº†-host-docker-internal" tabindex="-1"><a class="header-anchor" href="#åŸå› a-ä½¿ç”¨äº†-host-docker-internal" aria-hidden="true">#</a> åŸå› Aï¼šä½¿ç”¨äº† <code>host.docker.internal</code></h4><p><strong>é”™è¯¯é…ç½®</strong>ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;host.docker.internal:8085&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1. è·å–æœ¬æœºIP</span>
ipconfig getifaddr en0  <span class="token comment"># macOS</span>
<span class="token comment"># æˆ–</span>
<span class="token function">ip</span> addr show <span class="token operator">|</span> <span class="token function">grep</span> inet  <span class="token comment"># Linux</span>

<span class="token comment"># 2. ä¿®æ”¹ prometheus.yml</span>
targets: <span class="token punctuation">[</span><span class="token string">&#39;192.168.1.3:8085&#39;</span><span class="token punctuation">]</span>  <span class="token comment"># ä½¿ç”¨å®é™…IP</span>

<span class="token comment"># 3. é‡å¯ Prometheus</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml restart prometheus
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åŸå› b-é˜²ç«å¢™é˜»æ­¢è®¿é—®" tabindex="-1"><a class="header-anchor" href="#åŸå› b-é˜²ç«å¢™é˜»æ­¢è®¿é—®" aria-hidden="true">#</a> åŸå› Bï¼šé˜²ç«å¢™é˜»æ­¢è®¿é—®</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># macOS - å…è®¸ç«¯å£</span>
<span class="token function">sudo</span> /usr/libexec/ApplicationFirewall/socketfilterfw <span class="token parameter variable">--add</span> <span class="token number">8085</span>

<span class="token comment"># Linux - å¼€æ”¾ç«¯å£</span>
<span class="token function">sudo</span> ufw allow <span class="token number">8085</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åŸå› c-æœåŠ¡æœªå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#åŸå› c-æœåŠ¡æœªå¯åŠ¨" aria-hidden="true">#</a> åŸå› Cï¼šæœåŠ¡æœªå¯åŠ¨</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ£€æŸ¥ Scheduler Service æ˜¯å¦è¿è¡Œ</span>
<span class="token function">curl</span> http://localhost:8085/actuator/health
<span class="token comment"># åº”è¿”å›: {&quot;status&quot;:&quot;UP&quot;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é—®é¢˜3-grafana-dashboard-æ˜¾ç¤º-no-data" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜3-grafana-dashboard-æ˜¾ç¤º-no-data" aria-hidden="true">#</a> é—®é¢˜3ï¼šGrafana Dashboard æ˜¾ç¤º &quot;No data&quot;</h3><p><strong>å¯èƒ½åŸå› </strong>ï¼š</p><ol><li><p><strong>æ—¶é—´èŒƒå›´é”™è¯¯</strong></p><ul><li>è§£å†³ï¼šç‚¹å‡»å³ä¸Šè§’æ—¶é—´é€‰æ‹©å™¨ï¼Œæ”¹ä¸º &quot;Last 15 minutes&quot;</li></ul></li><li><p><strong>Prometheus æ•°æ®æºæœªé…ç½®</strong></p><ul><li>è§£å†³ï¼šSettings â†’ Data Sources â†’ æ·»åŠ  Prometheus</li></ul></li><li><p><strong>æŸ¥è¯¢è¯­æ³•é”™è¯¯</strong></p><ul><li>è§£å†³ï¼šæ£€æŸ¥ Panel ç¼–è¾‘é¡µé¢çš„é”™è¯¯æç¤º</li></ul></li><li><p><strong>æŒ‡æ ‡ç¡®å®ä¸å­˜åœ¨</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åœ¨ Prometheus ä¸­éªŒè¯æŒ‡æ ‡æ˜¯å¦å­˜åœ¨</span>
<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;http://localhost:9091/api/v1/label/__name__/values&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> scheduler
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="é—®é¢˜4-promql-è¯­æ³•é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜4-promql-è¯­æ³•é”™è¯¯" aria-hidden="true">#</a> é—®é¢˜4ï¼šPromQL è¯­æ³•é”™è¯¯</h3><p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code>application=&quot;scheduler<span class="token operator">-</span>service&quot;  # âŒ é”™è¯¯
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æ­£ç¡®å†™æ³•</strong>ï¼š</p><div class="language-promql line-numbers-mode" data-ext="promql"><pre class="language-promql"><code><span class="token context-labels"><span class="token punctuation">{</span><span class="token label-key attr-name">application</span><span class="token punctuation">=</span><span class="token label-value attr-value">&quot;scheduler-service&quot;</span><span class="token punctuation">}</span></span>  # âœ… æ­£ç¡®
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¸¸è§é”™è¯¯</strong>ï¼š</p><table><thead><tr><th>é”™è¯¯å†™æ³•</th><th>æ­£ç¡®å†™æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>application=&quot;xxx&quot;</code></td><td><code>{application=&quot;xxx&quot;}</code></td><td>ç¼ºå°‘èŠ±æ‹¬å·</td></tr><tr><td><code>up{job=&#39;scheduler&#39;}</code></td><td><code>up{job=&quot;scheduler&quot;}</code></td><td>PromQLä½¿ç”¨åŒå¼•å·</td></tr><tr><td><code>rate(metric)</code></td><td><code>rate(metric[1m])</code></td><td>rateéœ€è¦æ—¶é—´çª—å£</td></tr></tbody></table><h3 id="é—®é¢˜5-dashboard-è‡ªåŠ¨åŠ è½½å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜5-dashboard-è‡ªåŠ¨åŠ è½½å¤±è´¥" aria-hidden="true">#</a> é—®é¢˜5ï¼šDashboard è‡ªåŠ¨åŠ è½½å¤±è´¥</h3><p><strong>ç°è±¡</strong>ï¼šé‡å¯ Grafana å Dashboard æœªè‡ªåŠ¨å‡ºç°</p><p><strong>è§£å†³æ–¹æ³•1 - æ£€æŸ¥é…ç½®è·¯å¾„</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># éªŒè¯æ–‡ä»¶ç»“æ„</span>
tree infrastructure/grafana/
<span class="token comment"># åº”è¯¥çœ‹åˆ°ï¼š</span>
<span class="token comment"># â”œâ”€â”€ dashboards/</span>
<span class="token comment"># â”‚   â””â”€â”€ scheduler-monitor.json</span>
<span class="token comment"># â””â”€â”€ provisioning/</span>
<span class="token comment">#     â”œâ”€â”€ dashboards/</span>
<span class="token comment">#     â”‚   â””â”€â”€ dashboard-provider.yml</span>
<span class="token comment">#     â””â”€â”€ datasources/</span>
<span class="token comment">#         â””â”€â”€ prometheus.yml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è§£å†³æ–¹æ³•2 - æ£€æŸ¥ Docker å·æŒ‚è½½</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># è¿›å…¥å®¹å™¨æ£€æŸ¥</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> quant-grafana <span class="token function">ls</span> <span class="token parameter variable">-la</span> /etc/grafana/provisioning/dashboards
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> quant-grafana <span class="token function">ls</span> <span class="token parameter variable">-la</span> /var/lib/grafana/dashboards
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è§£å†³æ–¹æ³•3 - æ‰‹åŠ¨å¯¼å…¥</strong>ï¼š</p><ol><li>Dashboards â†’ Import</li><li>Upload JSON file</li><li>é€‰æ‹© <code>scheduler-monitor.json</code></li></ol><h2 id="ğŸ“Š-ç›‘æ§æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-ç›‘æ§æœ€ä½³å®è·µ" aria-hidden="true">#</a> ğŸ“Š ç›‘æ§æœ€ä½³å®è·µ</h2><h3 id="_1-å‘Šè­¦é…ç½®å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_1-å‘Šè­¦é…ç½®å»ºè®®" aria-hidden="true">#</a> 1. å‘Šè­¦é…ç½®å»ºè®®</h3><p>åœ¨ Grafana ä¸­é…ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦ï¼š</p><table><thead><tr><th>å‘Šè­¦é¡¹</th><th>æ¡ä»¶</th><th>æŒç»­æ—¶é—´</th><th>ä¸¥é‡ç¨‹åº¦</th></tr></thead><tbody><tr><td>æœåŠ¡ä¸å¯ç”¨</td><td><code>up == 0</code></td><td>1åˆ†é’Ÿ</td><td>ğŸ”´ Critical</td></tr><tr><td>æˆåŠŸç‡è¿‡ä½</td><td><code>success_rate &lt; 95</code></td><td>5åˆ†é’Ÿ</td><td>ğŸŸ  Warning</td></tr><tr><td>å“åº”æ—¶é—´è¿‡é«˜</td><td><code>duration &gt; 1s</code></td><td>5åˆ†é’Ÿ</td><td>ğŸŸ¡ Info</td></tr><tr><td>å†…å­˜ä½¿ç”¨è¿‡é«˜</td><td><code>memory &gt; 80%</code></td><td>10åˆ†é’Ÿ</td><td>ğŸŸ  Warning</td></tr></tbody></table><h3 id="_2-æ•°æ®ä¿ç•™ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-æ•°æ®ä¿ç•™ç­–ç•¥" aria-hidden="true">#</a> 2. æ•°æ®ä¿ç•™ç­–ç•¥</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># prometheus.yml</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;--storage.tsdb.retention.time=30d&#39;</span>  <span class="token comment"># ä¿ç•™30å¤©</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;--storage.tsdb.retention.size=50GB&#39;</span>  <span class="token comment"># æˆ–æœ€å¤§50GB</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-æ€§èƒ½ä¼˜åŒ–" aria-hidden="true">#</a> 3. æ€§èƒ½ä¼˜åŒ–</h3><p><strong>å‡å°‘é‡‡é›†é¢‘ç‡</strong>ï¼ˆå¦‚æœæ•°æ®é‡è¿‡å¤§ï¼‰ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 30s  <span class="token comment"># ä»15sæ”¹ä¸º30s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é™åˆ¶æ—¶é—´åºåˆ—æ•°</strong>ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">command</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;--storage.tsdb.max-series=100000&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨ Recording Rules</strong> é¢„è®¡ç®—å¸¸ç”¨æŸ¥è¯¢ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># prometheus-rules.yml</span>
<span class="token key atrule">groups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> scheduler_rules
    <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
    <span class="token key atrule">rules</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">record</span><span class="token punctuation">:</span> scheduler<span class="token punctuation">:</span>success_rate
        <span class="token key atrule">expr</span><span class="token punctuation">:</span> (scheduler_price_updates_total <span class="token punctuation">-</span> scheduler_price_updates_failed)
              / scheduler_price_updates_total * 100
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-å®‰å…¨å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_4-å®‰å…¨å»ºè®®" aria-hidden="true">#</a> 4. å®‰å…¨å»ºè®®</h3><ol><li><strong>ä¿®æ”¹é»˜è®¤å¯†ç </strong>ï¼šé¦–æ¬¡ç™»å½• Grafana åç«‹å³ä¿®æ”¹</li><li><strong>å¯ç”¨ HTTPS</strong>ï¼šç”Ÿäº§ç¯å¢ƒé…ç½® TLS è¯ä¹¦</li><li><strong>é™åˆ¶è®¿é—®</strong>ï¼šé…ç½®é˜²ç«å¢™è§„åˆ™</li><li><strong>å®šæœŸå¤‡ä»½</strong>ï¼šå¯¼å‡º Dashboard å’Œæ•°æ®æºé…ç½®</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å¤‡ä»½ Grafana é…ç½®</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> quant-grafana grafana-cli admin export-dashboard <span class="token operator">&gt;</span> backup.json

<span class="token comment"># å¤‡ä»½ Prometheus æ•°æ®</span>
<span class="token function">docker</span> <span class="token function">cp</span> quant-prometheus:/prometheus ./prometheus-backup
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ§ª-æµ‹è¯•ç›‘æ§ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#ğŸ§ª-æµ‹è¯•ç›‘æ§ç³»ç»Ÿ" aria-hidden="true">#</a> ğŸ§ª æµ‹è¯•ç›‘æ§ç³»ç»Ÿ</h2><p>ä½¿ç”¨æä¾›çš„æµ‹è¯•è„šæœ¬ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /Users/youweichen/quant-trading-platform
./test-monitoring.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•å†…å®¹</strong>ï¼š</p><ol><li>âœ… Prometheus å¥åº·æ£€æŸ¥</li><li>âœ… Grafana API è¿é€šæ€§</li><li>âœ… Scheduler Service çŠ¶æ€</li><li>âœ… Prometheus æŸ¥è¯¢ API</li><li>âœ… ç›‘æ§ç›®æ ‡åˆ—è¡¨</li></ol><p><strong>é¢„æœŸè¾“å‡º</strong>ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ğŸ§ª Grafanaç›‘æ§ç³»ç»Ÿæµ‹è¯•è„šæœ¬
================================

1ï¸âƒ£ æµ‹è¯•Prometheus (ç«¯å£9091)...
  âœ… Prometheusè¿è¡Œæ­£å¸¸

2ï¸âƒ£ æµ‹è¯•Grafana (ç«¯å£3001)...
  âœ… Grafanaè¿è¡Œæ­£å¸¸

3ï¸âƒ£ æ£€æŸ¥Scheduler Service (ç«¯å£8085)...
  âœ… Scheduler Serviceè¿è¡Œæ­£å¸¸

4ï¸âƒ£ æµ‹è¯•PrometheusæŸ¥è¯¢API...
  âœ… PrometheusæŸ¥è¯¢APIå·¥ä½œæ­£å¸¸

  ğŸ“ˆ ç›‘æ§ç›®æ ‡çŠ¶æ€ï¼š
    scheduler-service: ğŸŸ¢ UP
    trading-service: ğŸ”´ DOWN
    stock-service: ğŸ”´ DOWN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”„-æ—¥å¸¸è¿ç»´æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ğŸ”„-æ—¥å¸¸è¿ç»´æ“ä½œ" aria-hidden="true">#</a> ğŸ”„ æ—¥å¸¸è¿ç»´æ“ä½œ</h2><h3 id="å¯åŠ¨ç›‘æ§æ ˆ" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ç›‘æ§æ ˆ" aria-hidden="true">#</a> å¯åŠ¨ç›‘æ§æ ˆ</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> infrastructure/monitoring
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åœæ­¢ç›‘æ§æ ˆ" tabindex="-1"><a class="header-anchor" href="#åœæ­¢ç›‘æ§æ ˆ" aria-hidden="true">#</a> åœæ­¢ç›‘æ§æ ˆ</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml down
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é‡å¯æŸä¸ªæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#é‡å¯æŸä¸ªæœåŠ¡" aria-hidden="true">#</a> é‡å¯æŸä¸ªæœåŠ¡</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># é‡å¯ Prometheus</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml restart prometheus

<span class="token comment"># é‡å¯ Grafana</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml restart grafana
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŸ¥çœ‹æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹æ—¥å¿—" aria-hidden="true">#</a> æŸ¥çœ‹æ—¥å¿—</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹ Prometheus æ—¥å¿—</span>
<span class="token function">docker</span> logs quant-prometheus <span class="token parameter variable">-f</span>

<span class="token comment"># æŸ¥çœ‹ Grafana æ—¥å¿—</span>
<span class="token function">docker</span> logs quant-grafana <span class="token parameter variable">-f</span>

<span class="token comment"># æŸ¥çœ‹ Loki æ—¥å¿—</span>
<span class="token function">docker</span> logs quant-loki <span class="token parameter variable">-f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¸…ç†æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æ¸…ç†æ•°æ®" aria-hidden="true">#</a> æ¸…ç†æ•°æ®</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åœæ­¢æœåŠ¡</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml down

<span class="token comment"># åˆ é™¤æŒä¹…åŒ–æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰</span>
<span class="token function">docker</span> volume <span class="token function">rm</span> monitoring_prometheus-data
<span class="token function">docker</span> volume <span class="token function">rm</span> monitoring_grafana-data
<span class="token function">docker</span> volume <span class="token function">rm</span> monitoring_loki-data

<span class="token comment"># é‡æ–°å¯åŠ¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ›´æ–°é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°é…ç½®" aria-hidden="true">#</a> æ›´æ–°é…ç½®</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1. ä¿®æ”¹é…ç½®æ–‡ä»¶</span>
<span class="token function">vim</span> <span class="token punctuation">..</span>/prometheus/prometheus.yml

<span class="token comment"># 2. éªŒè¯é…ç½®è¯­æ³•</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> quant-prometheus promtool check config /etc/prometheus/prometheus.yml

<span class="token comment"># 3. çƒ­é‡è½½é…ç½®ï¼ˆæ— éœ€é‡å¯ï¼‰</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:9091/-/reload

<span class="token comment"># æˆ–è€…é‡å¯æœåŠ¡</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose.monitoring.yml restart prometheus
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-ç›¸å…³æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-ç›¸å…³æ–‡æ¡£" aria-hidden="true">#</a> ğŸ“š ç›¸å…³æ–‡æ¡£</h2>`,142),u=i(`<h2 id="ğŸ”—-å¿«é€Ÿè®¿é—®" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-å¿«é€Ÿè®¿é—®" aria-hidden="true">#</a> ğŸ”— å¿«é€Ÿè®¿é—®</h2><table><thead><tr><th>æœåŠ¡</th><th>åœ°å€</th><th>å‡­æ®</th></tr></thead><tbody><tr><td>Grafana</td><td>http://localhost:3001</td><td>admin / admin123</td></tr><tr><td>Prometheus</td><td>http://localhost:9091</td><td>-</td></tr><tr><td>Loki</td><td>http://localhost:3100</td><td>-</td></tr><tr><td>Scheduler Metrics</td><td>http://localhost:8085/actuator/prometheus</td><td>-</td></tr><tr><td>Scheduler Health</td><td>http://localhost:8085/actuator/health</td><td>-</td></tr></tbody></table><h2 id="ğŸ’¡-å¸¸è§é—®é¢˜-faq" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-å¸¸è§é—®é¢˜-faq" aria-hidden="true">#</a> ğŸ’¡ å¸¸è§é—®é¢˜ FAQ</h2><h3 id="q1-ä¸ºä»€ä¹ˆ-prometheus-ç«¯å£æ˜¯-9091-è€Œä¸æ˜¯é»˜è®¤çš„-9090" tabindex="-1"><a class="header-anchor" href="#q1-ä¸ºä»€ä¹ˆ-prometheus-ç«¯å£æ˜¯-9091-è€Œä¸æ˜¯é»˜è®¤çš„-9090" aria-hidden="true">#</a> Q1: ä¸ºä»€ä¹ˆ Prometheus ç«¯å£æ˜¯ 9091 è€Œä¸æ˜¯é»˜è®¤çš„ 9090ï¼Ÿ</h3><p>A: å› ä¸º ClashX ä»£ç†é»˜è®¤å ç”¨ 9090 ç«¯å£ï¼Œä¸ºé¿å…å†²çªæ”¹ç”¨ 9091ã€‚</p><h3 id="q2-å¦‚ä½•æ·»åŠ æ–°çš„ç›‘æ§æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#q2-å¦‚ä½•æ·»åŠ æ–°çš„ç›‘æ§æœåŠ¡" aria-hidden="true">#</a> Q2: å¦‚ä½•æ·»åŠ æ–°çš„ç›‘æ§æœåŠ¡ï¼Ÿ</h3><p>A: ç¼–è¾‘ <code>prometheus.yml</code> æ·»åŠ æ–°çš„ <code>scrape_config</code>ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;new-service&#39;</span>
  <span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> <span class="token string">&#39;/actuator/prometheus&#39;</span>
  <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;192.168.1.3:8086&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q3-dashboard-æ•°æ®ä¸åˆ·æ–°æ€ä¹ˆåŠ" tabindex="-1"><a class="header-anchor" href="#q3-dashboard-æ•°æ®ä¸åˆ·æ–°æ€ä¹ˆåŠ" aria-hidden="true">#</a> Q3: Dashboard æ•°æ®ä¸åˆ·æ–°æ€ä¹ˆåŠï¼Ÿ</h3><p>A: æ£€æŸ¥å³ä¸Šè§’åˆ·æ–°é—´éš”è®¾ç½®ï¼Œå»ºè®®è®¾ä¸º 5s æˆ– 10sã€‚</p><h3 id="q4-å¦‚ä½•å¯¼å‡º-grafana-dashboard" tabindex="-1"><a class="header-anchor" href="#q4-å¦‚ä½•å¯¼å‡º-grafana-dashboard" aria-hidden="true">#</a> Q4: å¦‚ä½•å¯¼å‡º Grafana Dashboardï¼Ÿ</h3><p>A: Dashboard é¡µé¢ â†’ Settings â†’ JSON Model â†’ Copy to Clipboard</p><h3 id="q5-prometheus-æ•°æ®å ç”¨ç©ºé—´å¤ªå¤§æ€ä¹ˆåŠ" tabindex="-1"><a class="header-anchor" href="#q5-prometheus-æ•°æ®å ç”¨ç©ºé—´å¤ªå¤§æ€ä¹ˆåŠ" aria-hidden="true">#</a> Q5: Prometheus æ•°æ®å ç”¨ç©ºé—´å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ</h3><p>A: å‡å°‘ä¿ç•™æ—¶é—´æˆ–å¢åŠ é‡‡é›†é—´éš”ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">-</span><span class="token punctuation">-</span>storage.tsdb.retention.time=7d  <span class="token comment"># æ”¹ä¸º7å¤©</span>
<span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 30s              <span class="token comment"># æ”¹ä¸º30ç§’</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>æœ€åæ›´æ–°</strong>: 2025-10-25 <strong>ç»´æŠ¤è€…</strong>: YC Tech Team</p>`,17);function m(v,h){const s=r("RouterLink");return o(),d("div",null,[p,a("ul",null,[a("li",null,[e(s,{to:"/quant-platform/SCHEDULER_SERVICE.html"},{default:t(()=>[n("Scheduler Service æŠ€æœ¯æ–‡æ¡£")]),_:1}),n(" - è¯¦ç»†æŠ€æœ¯æ¶æ„")]),a("li",null,[e(s,{to:"/quant-platform/SCHEDULER_QUICKSTART.html"},{default:t(()=>[n("Scheduler å¿«é€Ÿä¸Šæ‰‹")]),_:1}),n(" - 5åˆ†é’Ÿå…¥é—¨")]),a("li",null,[e(s,{to:"/quant-platform/ARCHITECTURE.html"},{default:t(()=>[n("ç³»ç»Ÿæ¶æ„")]),_:1}),n(" - æ•´ä½“æ¶æ„è®¾è®¡")])]),u])}const b=l(c,[["render",m],["__file","MONITORING.html.vue"]]);export{b as default};
