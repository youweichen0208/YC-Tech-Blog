import{_ as o,r as l,o as c,c as i,a as n,d as e,w as t,b as s,e as p}from"./app-PYXSjfSC.js";const r={},u=p(`<h1 id="scheduler-service-快速上手指南" tabindex="-1"><a class="header-anchor" href="#scheduler-service-快速上手指南" aria-hidden="true">#</a> Scheduler Service 快速上手指南</h1><h2 id="🎯-简介" tabindex="-1"><a class="header-anchor" href="#🎯-简介" aria-hidden="true">#</a> 🎯 简介</h2><p>Scheduler Service 是量化交易平台的智能调度引擎，它使用AI算法动态评估股票热度，并根据热度自动调整价格更新频率。本指南将帮助你快速上手这个强大的服务。</p><h2 id="🚀-5分钟快速启动" tabindex="-1"><a class="header-anchor" href="#🚀-5分钟快速启动" aria-hidden="true">#</a> 🚀 5分钟快速启动</h2><h3 id="前置条件" tabindex="-1"><a class="header-anchor" href="#前置条件" aria-hidden="true">#</a> 前置条件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 确保已安装</span>
✅ Java <span class="token number">17</span>+
✅ Redis <span class="token number">7.0</span>+
✅ Stock Service <span class="token punctuation">(</span><span class="token number">8082</span><span class="token punctuation">)</span>
✅ Trading Service <span class="token punctuation">(</span><span class="token number">8083</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第一步-启动redis" tabindex="-1"><a class="header-anchor" href="#第一步-启动redis" aria-hidden="true">#</a> 第一步：启动Redis</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 使用Docker快速启动</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> redis <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 redis:latest

<span class="token comment"># 验证Redis运行</span>
redis-cli <span class="token function">ping</span>
<span class="token comment"># 输出: PONG ✅</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第二步-启动依赖服务" tabindex="-1"><a class="header-anchor" href="#第二步-启动依赖服务" aria-hidden="true">#</a> 第二步：启动依赖服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启动Stock Service</span>
<span class="token builtin class-name">cd</span> stock-service
mvn spring-boot:run <span class="token operator">&amp;</span>

<span class="token comment"># 启动Trading Service</span>
<span class="token builtin class-name">cd</span> trading-service
mvn spring-boot:run <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第三步-启动scheduler-service" tabindex="-1"><a class="header-anchor" href="#第三步-启动scheduler-service" aria-hidden="true">#</a> 第三步：启动Scheduler Service</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> scheduler-service
mvn spring-boot:run
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>看到以下输出表示启动成功：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>📅 调度服务启动成功！
🔗 WebSocket连接地址: ws://localhost:8085/ws
📊 健康检查: http://localhost:8085/actuator/health
⏰ 定时任务监控: http://localhost:8085/actuator/scheduledtasks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第四步-验证服务" tabindex="-1"><a class="header-anchor" href="#第四步-验证服务" aria-hidden="true">#</a> 第四步：验证服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 健康检查</span>
<span class="token function">curl</span> http://localhost:8085/actuator/health

<span class="token comment"># 查看调度器状态</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/status

<span class="token comment"># 查看AI热度排行榜</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/hotness/ranking?limit<span class="token operator">=</span><span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📊-核心功能演示" tabindex="-1"><a class="header-anchor" href="#📊-核心功能演示" aria-hidden="true">#</a> 📊 核心功能演示</h2><h3 id="_1-ai热度检测" tabindex="-1"><a class="header-anchor" href="#_1-ai热度检测" aria-hidden="true">#</a> 1. AI热度检测</h3><p>查看实时股票热度评分和分类：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 获取热度排行榜（Top 10）</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/hotness/ranking?limit<span class="token operator">=</span><span class="token number">10</span> <span class="token operator">|</span> jq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>响应示例：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;stockCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;600519.SH&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stockName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;贵州茅台&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hotnessScore&quot;</span><span class="token operator">:</span> <span class="token number">85.6</span><span class="token punctuation">,</span>        <span class="token comment">// AI评分</span>
    <span class="token property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUPER_HOT&quot;</span><span class="token punctuation">,</span>      <span class="token comment">// 自动分类</span>
    <span class="token property">&quot;volume&quot;</span><span class="token operator">:</span> <span class="token number">125000000</span><span class="token punctuation">,</span>          <span class="token comment">// 交易量</span>
    <span class="token property">&quot;volatility&quot;</span><span class="token operator">:</span> <span class="token number">0.045</span><span class="token punctuation">,</span>          <span class="token comment">// 波动率</span>
    <span class="token property">&quot;priceChange&quot;</span><span class="token operator">:</span> <span class="token number">2.8</span><span class="token punctuation">,</span>           <span class="token comment">// 涨跌幅</span>
    <span class="token property">&quot;updateFrequency&quot;</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>       <span class="token comment">// 更新次数</span>
    <span class="token property">&quot;lastUpdate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-01-20T14:30:00&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-查看指定股票热度" tabindex="-1"><a class="header-anchor" href="#_2-查看指定股票热度" aria-hidden="true">#</a> 2. 查看指定股票热度</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查询贵州茅台的热度数据</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/hotness/600519.SH <span class="token operator">|</span> jq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-热度统计信息" tabindex="-1"><a class="header-anchor" href="#_3-热度统计信息" aria-hidden="true">#</a> 3. 热度统计信息</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 获取整体统计</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/hotness/statistics <span class="token operator">|</span> jq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;superHotCount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>           <span class="token comment">// 超级热门股票数</span>
  <span class="token property">&quot;hotCount&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>                <span class="token comment">// 热门股票数</span>
  <span class="token property">&quot;normalCount&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>            <span class="token comment">// 普通股票数</span>
  <span class="token property">&quot;coldCount&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>               <span class="token comment">// 冷门股票数</span>
  <span class="token property">&quot;totalStocks&quot;</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>            <span class="token comment">// 总监控股票数</span>
  <span class="token property">&quot;averageHotnessScore&quot;</span><span class="token operator">:</span> <span class="token number">42.5</span>   <span class="token comment">// 平均热度评分</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-性能指标监控" tabindex="-1"><a class="header-anchor" href="#_4-性能指标监控" aria-hidden="true">#</a> 4. 性能指标监控</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看调度器性能指标</span>
<span class="token function">curl</span> http://localhost:8085/api/v1/scheduler/metrics <span class="token operator">|</span> jq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;totalUpdates&quot;</span><span class="token operator">:</span> <span class="token number">15240</span><span class="token punctuation">,</span>        <span class="token comment">// 总更新次数</span>
  <span class="token property">&quot;failedUpdates&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>          <span class="token comment">// 失败次数</span>
  <span class="token property">&quot;successRate&quot;</span><span class="token operator">:</span> <span class="token number">99.92</span><span class="token punctuation">,</span>         <span class="token comment">// 成功率</span>
  <span class="token property">&quot;monitoredStocks&quot;</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>        <span class="token comment">// 监控股票数</span>
  <span class="token property">&quot;topStocks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token comment">// 更新最频繁的股票</span>
    <span class="token property">&quot;600519.SH&quot;</span><span class="token operator">:</span> <span class="token number">1520</span><span class="token punctuation">,</span>
    <span class="token property">&quot;000001.SZ&quot;</span><span class="token operator">:</span> <span class="token number">1015</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;aiHotness&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token comment">// AI热度统计</span>
    <span class="token property">&quot;superHotCount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hotCount&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;normalCount&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token property">&quot;coldCount&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token property">&quot;averageHotnessScore&quot;</span><span class="token operator">:</span> <span class="token number">42.5</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="🔄-websocket实时推送" tabindex="-1"><a class="header-anchor" href="#🔄-websocket实时推送" aria-hidden="true">#</a> 🔄 WebSocket实时推送</h2><h3 id="前端集成示例" tabindex="-1"><a class="header-anchor" href="#前端集成示例" aria-hidden="true">#</a> 前端集成示例</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1. 建立WebSocket连接</span>
<span class="token keyword">import</span> SockJS <span class="token keyword">from</span> <span class="token string">&#39;sockjs-client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Stomp <span class="token keyword">from</span> <span class="token string">&#39;stompjs&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SockJS</span><span class="token punctuation">(</span><span class="token string">&#39;http://localhost:8085/ws&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> stompClient <span class="token operator">=</span> Stomp<span class="token punctuation">.</span><span class="token function">over</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span>

stompClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">frame</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;WebSocket连接成功！&#39;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2. 订阅股票价格更新</span>
  stompClient<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;/topic/price/600519.SH&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> priceData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;收到价格更新:&#39;</span><span class="token punctuation">,</span> priceData<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 更新UI</span>
    <span class="token function">updateStockCard</span><span class="token punctuation">(</span>priceData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3. 订阅交易信号</span>
  stompClient<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;/topic/signals&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> signal <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;收到交易信号:&#39;</span><span class="token punctuation">,</span> signal<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 显示通知</span>
    <span class="token function">showSignalNotification</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="消息格式" tabindex="-1"><a class="header-anchor" href="#消息格式" aria-hidden="true">#</a> 消息格式</h3><p><strong>价格更新消息</strong>:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;stockCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;600519.SH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stockName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;贵州茅台&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">1685.50</span><span class="token punctuation">,</span>
  <span class="token property">&quot;change&quot;</span><span class="token operator">:</span> <span class="token number">2.8</span><span class="token punctuation">,</span>
  <span class="token property">&quot;changePercent&quot;</span><span class="token operator">:</span> <span class="token number">0.0166</span><span class="token punctuation">,</span>
  <span class="token property">&quot;volume&quot;</span><span class="token operator">:</span> <span class="token number">125000000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUPER_HOT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;updateTime&quot;</span><span class="token operator">:</span> <span class="token number">1705738200000</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>交易信号消息</strong>:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token property">&quot;strategyId&quot;</span><span class="token operator">:</span> <span class="token number">456</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stockCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;600519.SH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stockName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;贵州茅台&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signalType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BUY&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">1685.50</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signalStrength&quot;</span><span class="token operator">:</span> <span class="token number">0.85</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;短期均线上穿长期均线&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signalTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-01-20T14:30:00&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;executed&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="⚙️-配置自定义" tabindex="-1"><a class="header-anchor" href="#⚙️-配置自定义" aria-hidden="true">#</a> ⚙️ 配置自定义</h2><h3 id="调整更新频率" tabindex="-1"><a class="header-anchor" href="#调整更新频率" aria-hidden="true">#</a> 调整更新频率</h3><p>编辑 <code>application.yml</code>:</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">scheduler</span><span class="token punctuation">:</span>
  <span class="token key atrule">price-update</span><span class="token punctuation">:</span>
    <span class="token key atrule">super-hot-stocks-interval</span><span class="token punctuation">:</span> <span class="token number">3000</span>   <span class="token comment"># 超级热门: 3秒</span>
    <span class="token key atrule">hot-stocks-interval</span><span class="token punctuation">:</span> <span class="token number">5000</span>         <span class="token comment"># 热门: 5秒</span>
    <span class="token key atrule">normal-stocks-interval</span><span class="token punctuation">:</span> <span class="token number">10000</span>     <span class="token comment"># 普通: 10秒</span>
    <span class="token key atrule">cold-stocks-interval</span><span class="token punctuation">:</span> <span class="token number">30000</span>       <span class="token comment"># 冷门: 30秒</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置超级热门股票" tabindex="-1"><a class="header-anchor" href="#配置超级热门股票" aria-hidden="true">#</a> 配置超级热门股票</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">scheduler</span><span class="token punctuation">:</span>
  <span class="token key atrule">super-hot-stocks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;600519.SH&quot;</span>  <span class="token comment"># 贵州茅台</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;000001.SZ&quot;</span>  <span class="token comment"># 平安银行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调整性能参数" tabindex="-1"><a class="header-anchor" href="#调整性能参数" aria-hidden="true">#</a> 调整性能参数</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">scheduler</span><span class="token punctuation">:</span>
  <span class="token key atrule">performance</span><span class="token punctuation">:</span>
    <span class="token key atrule">thread-pool-size</span><span class="token punctuation">:</span> <span class="token number">8</span>        <span class="token comment"># 线程池大小（推荐: CPU核心数×2）</span>
    <span class="token key atrule">parallel-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment"># 启用并行处理</span>
    <span class="token key atrule">batch-size</span><span class="token punctuation">:</span> <span class="token number">10</span>            <span class="token comment"># 批处理大小</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改交易时段" tabindex="-1"><a class="header-anchor" href="#修改交易时段" aria-hidden="true">#</a> 修改交易时段</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">scheduler</span><span class="token punctuation">:</span>
  <span class="token key atrule">trading-hours</span><span class="token punctuation">:</span>
    <span class="token key atrule">start</span><span class="token punctuation">:</span> <span class="token string">&quot;09:30&quot;</span>   <span class="token comment"># 开始时间</span>
    <span class="token key atrule">end</span><span class="token punctuation">:</span> <span class="token string">&quot;15:00&quot;</span>     <span class="token comment"># 结束时间</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📈-监控dashboard" tabindex="-1"><a class="header-anchor" href="#📈-监控dashboard" aria-hidden="true">#</a> 📈 监控Dashboard</h2><h3 id="prometheus指标" tabindex="-1"><a class="header-anchor" href="#prometheus指标" aria-hidden="true">#</a> Prometheus指标</h3><p>访问: <code>http://localhost:8085/actuator/prometheus</code></p><p>关键指标：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>scheduler_price_updates_total        # 总更新次数
scheduler_price_updates_failed       # 失败次数
scheduler_ai_hotness_score           # AI热度评分
scheduler_monitored_stocks           # 监控股票数
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="grafana可视化" tabindex="-1"><a class="header-anchor" href="#grafana可视化" aria-hidden="true">#</a> Grafana可视化</h3><ol><li>启动Grafana:</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 grafana/grafana
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><p>访问: <code>http://localhost:3000</code> (admin/admin)</p></li><li><p>导入Dashboard:</p><ul><li>上传 <code>infrastructure/grafana/dashboards/scheduler-monitor.json</code></li></ul></li></ol><h2 id="🔍-实时监控前端页面" tabindex="-1"><a class="header-anchor" href="#🔍-实时监控前端页面" aria-hidden="true">#</a> 🔍 实时监控前端页面</h2><p>访问前端实时监控页面查看可视化数据：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://localhost:3003/monitoring/realtime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>功能包括：</p><ul><li>📊 实时股票卡片展示</li><li>📈 热度分布统计</li><li>🔔 实时更新日志</li><li>🎯 分类筛选和排序</li></ul><h2 id="🎓-进阶使用" tabindex="-1"><a class="header-anchor" href="#🎓-进阶使用" aria-hidden="true">#</a> 🎓 进阶使用</h2><h3 id="_1-自定义热度评分权重" tabindex="-1"><a class="header-anchor" href="#_1-自定义热度评分权重" aria-hidden="true">#</a> 1. 自定义热度评分权重</h3><p>修改 <code>StockHotnessDetectionService.java</code>:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 调整权重配置</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">VOLUME_WEIGHT</span> <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>        <span class="token comment">// 交易量权重</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">VOLATILITY_WEIGHT</span> <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>   <span class="token comment">// 波动率权重</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">PRICE_CHANGE_WEIGHT</span> <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>  <span class="token comment">// 价格变化权重</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">FREQUENCY_WEIGHT</span> <span class="token operator">=</span> <span class="token number">0.15</span><span class="token punctuation">;</span>    <span class="token comment">// 更新频率权重</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">TIME_DECAY_WEIGHT</span> <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>    <span class="token comment">// 时间衰减权重</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-调整热度阈值" tabindex="-1"><a class="header-anchor" href="#_2-调整热度阈值" aria-hidden="true">#</a> 2. 调整热度阈值</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 修改分类阈值</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">SUPER_HOT_THRESHOLD</span> <span class="token operator">=</span> <span class="token number">80.0</span><span class="token punctuation">;</span>  <span class="token comment">// 超级热门</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">HOT_THRESHOLD</span> <span class="token operator">=</span> <span class="token number">60.0</span><span class="token punctuation">;</span>       <span class="token comment">// 热门</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">NORMAL_THRESHOLD</span> <span class="token operator">=</span> <span class="token number">30.0</span><span class="token punctuation">;</span>    <span class="token comment">// 普通</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-启用策略自动交易" tabindex="-1"><a class="header-anchor" href="#_3-启用策略自动交易" aria-hidden="true">#</a> 3. 启用策略自动交易</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">scheduler</span><span class="token punctuation">:</span>
  <span class="token key atrule">auto-trade-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># ⚠️ 谨慎启用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>启用后，系统会自动执行策略生成的交易信号。</p><h2 id="📝-常见使用场景" tabindex="-1"><a class="header-anchor" href="#📝-常见使用场景" aria-hidden="true">#</a> 📝 常见使用场景</h2><h3 id="场景1-监控重点股票" tabindex="-1"><a class="header-anchor" href="#场景1-监控重点股票" aria-hidden="true">#</a> 场景1：监控重点股票</h3><ol><li>配置超级热门股票列表</li><li>系统自动3秒更新</li><li>WebSocket实时推送给前端</li><li>前端展示实时价格卡片</li></ol><h3 id="场景2-策略自动执行" tabindex="-1"><a class="header-anchor" href="#场景2-策略自动执行" aria-hidden="true">#</a> 场景2：策略自动执行</h3><ol><li>创建交易策略（如MA交叉策略）</li><li>启用策略监控</li><li>系统自动检测信号</li><li>推送信号给用户</li><li>（可选）自动执行交易</li></ol><h3 id="场景3-性能监控分析" tabindex="-1"><a class="header-anchor" href="#场景3-性能监控分析" aria-hidden="true">#</a> 场景3：性能监控分析</h3><ol><li>访问Grafana dashboard</li><li>查看实时更新趋势</li><li>分析成功率和性能</li><li>识别热门股票变化</li></ol><h2 id="🐛-故障排查" tabindex="-1"><a class="header-anchor" href="#🐛-故障排查" aria-hidden="true">#</a> 🐛 故障排查</h2><h3 id="问题1-redis连接失败" tabindex="-1"><a class="header-anchor" href="#问题1-redis连接失败" aria-hidden="true">#</a> 问题1：Redis连接失败</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 检查Redis状态</span>
redis-cli <span class="token function">ping</span>

<span class="token comment"># 如果返回错误，重启Redis</span>
<span class="token function">docker</span> restart redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="问题2-stock-service调用失败" tabindex="-1"><a class="header-anchor" href="#问题2-stock-service调用失败" aria-hidden="true">#</a> 问题2：Stock Service调用失败</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 检查Stock Service状态</span>
<span class="token function">curl</span> http://localhost:8082/actuator/health

<span class="token comment"># 检查端口是否被占用</span>
<span class="token function">lsof</span> <span class="token parameter variable">-i</span> :8082
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="问题3-非交易时段无数据" tabindex="-1"><a class="header-anchor" href="#问题3-非交易时段无数据" aria-hidden="true">#</a> 问题3：非交易时段无数据</h3><p>这是正常现象。系统默认只在9:30-15:00更新数据。</p><p><strong>测试时临时关闭限制</strong>:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// TieredPricePollingScheduler.java</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isTradingHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// 仅用于测试</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📚-扩展阅读" tabindex="-1"><a class="header-anchor" href="#📚-扩展阅读" aria-hidden="true">#</a> 📚 扩展阅读</h2>`,90),d=p('<h2 id="💡-最佳实践" tabindex="-1"><a class="header-anchor" href="#💡-最佳实践" aria-hidden="true">#</a> 💡 最佳实践</h2><ol><li><strong>开发环境</strong>: 关闭Kafka，使用轮询模式即可</li><li><strong>生产环境</strong>: 根据负载调整线程池大小</li><li><strong>监控配置</strong>: 始终启用Prometheus + Grafana</li><li><strong>缓存策略</strong>: 确保Redis有足够内存</li><li><strong>热度权重</strong>: 根据实际需求调整评分权重</li></ol><h2 id="🎯-下一步" tabindex="-1"><a class="header-anchor" href="#🎯-下一步" aria-hidden="true">#</a> 🎯 下一步</h2><ul><li>✅ 尝试修改热度权重，观察分类变化</li><li>✅ 集成前端WebSocket，实现实时UI</li><li>✅ 配置Grafana Dashboard，可视化监控</li><li>✅ 创建自定义交易策略，测试自动执行</li></ul><hr><p><em>快速上手指南 - 让你在5分钟内体验Scheduler Service的强大功能！</em></p>',6);function k(v,m){const a=l("RouterLink");return c(),i("div",null,[u,n("ul",null,[n("li",null,[e(a,{to:"/quant-platform/SCHEDULER_SERVICE.html"},{default:t(()=>[s("完整技术文档")]),_:1}),s(" - 深入了解架构和算法")]),n("li",null,[e(a,{to:"/scheduler-service/AI_HOTNESS_DETECTION.html"},{default:t(()=>[s("AI热度检测详解")]),_:1})]),n("li",null,[e(a,{to:"/scheduler-service/POLLING_OPTIMIZATION.html"},{default:t(()=>[s("轮询优化文档")]),_:1})]),n("li",null,[e(a,{to:"/scheduler-service/DEPLOYMENT_NOTES.html"},{default:t(()=>[s("部署说明")]),_:1})])]),d])}const b=o(r,[["render",k],["__file","SCHEDULER_QUICKSTART.html.vue"]]);export{b as default};
