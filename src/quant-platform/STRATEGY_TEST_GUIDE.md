# åŒå‡çº¿äº¤å‰ç­–ç•¥åŠŸèƒ½ - æµ‹è¯•æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å·²å®ç°å®Œæ•´çš„åŒå‡çº¿äº¤å‰ç­–ç•¥ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
- âœ… æŠ€æœ¯æŒ‡æ ‡è®¡ç®—åº“ï¼ˆMAã€MACDã€RSIã€BOLLï¼‰
- âœ… ç­–ç•¥æ¥å£å’ŒåŒå‡çº¿äº¤å‰ç­–ç•¥å®ç°
- âœ… æ•°æ®åº“å®ä½“å’ŒRepository
- âœ… ç­–ç•¥æœåŠ¡å±‚å’ŒREST API
- âœ… å‰ç«¯ç­–ç•¥ç®¡ç†é¡µé¢

## ğŸ“‹ æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
# è¿›å…¥trading-serviceç›®å½•
cd trading-service

# ä½¿ç”¨Mavenå¯åŠ¨ï¼ˆéœ€è¦å®‰è£…Mavenï¼‰
mvn spring-boot:run

# æˆ–ä½¿ç”¨Gradleï¼ˆå¦‚æœæœ‰gradle wrapperï¼‰
./gradlew bootRun
```

æœåŠ¡å°†åœ¨ç«¯å£ **8083** å¯åŠ¨ã€‚

### 2. éªŒè¯æœåŠ¡å¥åº·çŠ¶æ€

```bash
# æ£€æŸ¥ç­–ç•¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8083/trading-service/api/strategy/health

# é¢„æœŸå“åº”ï¼š
# {"status":"UP","service":"strategy-service"}
```

### 3. è·å–æ”¯æŒçš„ç­–ç•¥ç±»å‹

```bash
curl http://localhost:8083/trading-service/api/strategy/types

# é¢„æœŸå“åº”åŒ…å«MA_CROSSç­–ç•¥ä¿¡æ¯
```

### 4. åˆ›å»ºåŒå‡çº¿äº¤å‰ç­–ç•¥

```bash
curl -X POST http://localhost:8083/trading-service/api/strategy/create \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æˆ‘çš„ç¬¬ä¸€ä¸ªç­–ç•¥",
    "type": "MA_CROSS",
    "description": "5æ—¥å’Œ20æ—¥å‡çº¿äº¤å‰ç­–ç•¥",
    "parameters": "{\"shortPeriod\": 5, \"longPeriod\": 20}",
    "userId": 1
  }'

# é¢„æœŸå“åº”ï¼š
# {"success":true,"message":"ç­–ç•¥åˆ›å»ºæˆåŠŸ","strategy":{...}}
# è®°å½•è¿”å›çš„strategy.idç”¨äºåç»­æµ‹è¯•
```

### 5. ä¸ºæŒ‡å®šè‚¡ç¥¨ç”Ÿæˆäº¤æ˜“ä¿¡å·

```bash
# å‡è®¾ä¸Šä¸€æ­¥è¿”å›çš„strategyIdæ˜¯1
curl -X POST http://localhost:8083/trading-service/api/strategy/1/signal/000001.SZ

# é¢„æœŸå“åº”ï¼š
# {
#   "success": true,
#   "message": "ä¿¡å·ç”ŸæˆæˆåŠŸ",
#   "signal": {
#     "stockCode": "000001.SZ",
#     "stockName": "å¹³å®‰é“¶è¡Œ",
#     "signalType": "BUY" | "SELL" | "HOLD",
#     "price": 11.16,
#     "signalStrength": 2.5,
#     "reason": "é‡‘å‰ä¿¡å·: MA5(11.20) å‘ä¸Šç©¿è¶Š MA20(11.00)",
#     "signalTime": "2025-10-23T12:00:00"
#   }
# }
```

### 6. æ‰¹é‡ç”Ÿæˆå¤šåªè‚¡ç¥¨çš„ä¿¡å·

```bash
curl -X POST http://localhost:8083/trading-service/api/strategy/1/signals \
  -H "Content-Type: application/json" \
  -d '{
    "stockCodes": ["000001.SZ", "600036.SH", "600519.SH"]
  }'

# é¢„æœŸå“åº”ï¼š
# {
#   "success": true,
#   "message": "æ‰¹é‡ä¿¡å·ç”Ÿæˆå®Œæˆ",
#   "signals": [...],
#   "totalCount": 3
# }
```

### 7. æŸ¥çœ‹ç­–ç•¥çš„æ‰€æœ‰å†å²ä¿¡å·

```bash
curl http://localhost:8083/trading-service/api/strategy/1/signals

# è¿”å›è¯¥ç­–ç•¥ç”Ÿæˆçš„æ‰€æœ‰ä¿¡å·è®°å½•
```

### 8. å‰ç«¯æµ‹è¯•

```bash
# å¯åŠ¨å‰ç«¯ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
cd web-frontend
npm install  # å¦‚æœè¿˜æ²¡å®‰è£…ä¾èµ–
npm run dev

# è®¿é—® http://localhost:3003/dashboard/strategy
```

**å‰ç«¯æ“ä½œæµç¨‹ï¼š**
1. ç‚¹å‡»"åˆ›å»ºæ–°ç­–ç•¥"æŒ‰é’®
2. å¡«å†™ç­–ç•¥åç§°ï¼Œé€‰æ‹©"åŒå‡çº¿äº¤å‰"ç­–ç•¥ç±»å‹
3. é…ç½®çŸ­æœŸå‡çº¿ï¼ˆ5æ—¥ï¼‰å’Œé•¿æœŸå‡çº¿ï¼ˆ20æ—¥ï¼‰
4. ç‚¹å‡»"åˆ›å»º"
5. åœ¨ç­–ç•¥åˆ—è¡¨ä¸­ç‚¹å‡»"ç”Ÿæˆä¿¡å·"
6. è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 000001.SZï¼‰
7. æŸ¥çœ‹ç”Ÿæˆçš„äº¤æ˜“ä¿¡å·ï¼ˆBUY/SELL/HOLDï¼‰
8. ç‚¹å‡»"æŸ¥çœ‹ä¿¡å·"æŸ¥çœ‹å†å²è®°å½•

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹ 1: é‡‘å‰ä¿¡å·ï¼ˆä¹°å…¥ï¼‰
å½“çŸ­æœŸMAå‘ä¸Šç©¿è¶Šé•¿æœŸMAæ—¶ï¼Œåº”è¯¥ç”ŸæˆBUYä¿¡å·ã€‚

**æ¨¡æ‹Ÿæ•°æ®ç‰¹å¾ï¼š**
- å‰ä¸€å¤©ï¼šMA5 < MA20
- å½“å¤©ï¼šMA5 > MA20
- **é¢„æœŸç»“æœï¼š** signalType = "BUY"

### æµ‹è¯•ç”¨ä¾‹ 2: æ­»å‰ä¿¡å·ï¼ˆå–å‡ºï¼‰
å½“çŸ­æœŸMAå‘ä¸‹ç©¿è¶Šé•¿æœŸMAæ—¶ï¼Œåº”è¯¥ç”ŸæˆSELLä¿¡å·ã€‚

**æ¨¡æ‹Ÿæ•°æ®ç‰¹å¾ï¼š**
- å‰ä¸€å¤©ï¼šMA5 > MA20
- å½“å¤©ï¼šMA5 < MA20
- **é¢„æœŸç»“æœï¼š** signalType = "SELL"

### æµ‹è¯•ç”¨ä¾‹ 3: æ— äº¤å‰ï¼ˆæŒæœ‰ï¼‰
å½“æ²¡æœ‰äº¤å‰å‘ç”Ÿæ—¶ï¼Œåº”è¯¥ç”ŸæˆHOLDä¿¡å·ã€‚

**é¢„æœŸç»“æœï¼š** signalType = "HOLD"

## ğŸ“Š å…³é”®æ–‡ä»¶ä½ç½®

### åç«¯
```
trading-service/src/main/java/com/quant/trading/
â”œâ”€â”€ indicator/
â”‚   â””â”€â”€ IndicatorCalculator.java          # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”œâ”€â”€ strategy/
â”‚   â”œâ”€â”€ TradingStrategy.java              # ç­–ç•¥æ¥å£
â”‚   â””â”€â”€ MovingAverageCrossStrategy.java   # åŒå‡çº¿ç­–ç•¥å®ç°
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ Strategy.java                     # ç­–ç•¥å®ä½“
â”‚   â””â”€â”€ StrategySignal.java               # ä¿¡å·å®ä½“
â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ StrategyRepository.java
â”‚   â””â”€â”€ StrategySignalRepository.java
â”œâ”€â”€ service/
â”‚   â””â”€â”€ StrategyService.java              # ç­–ç•¥æœåŠ¡
â””â”€â”€ controller/
    â””â”€â”€ StrategyController.java           # REST API
```

### å‰ç«¯
```
web-frontend/src/
â”œâ”€â”€ views/dashboard/
â”‚   â”œâ”€â”€ Strategy.vue                      # ç­–ç•¥ç®¡ç†é¡µé¢
â”‚   â””â”€â”€ Layout.vue                        # å¯¼èˆªèœå•ï¼ˆå·²æ·»åŠ ç­–ç•¥å…¥å£ï¼‰
â””â”€â”€ router/
    â””â”€â”€ index.js                          # è·¯ç”±é…ç½®ï¼ˆå·²æ·»åŠ /strategyè·¯ç”±ï¼‰
```

## ğŸ¯ ä¿¡å·ç±»å‹è¯´æ˜

### BUYï¼ˆä¹°å…¥ä¿¡å·ï¼‰
- **æ¡ä»¶ï¼š** é‡‘å‰ï¼ˆGolden Crossï¼‰
- **å®šä¹‰ï¼š** çŸ­æœŸå‡çº¿å‘ä¸Šç©¿è¶Šé•¿æœŸå‡çº¿
- **æ“ä½œå»ºè®®ï¼š** è€ƒè™‘ä¹°å…¥è¯¥è‚¡ç¥¨

### SELLï¼ˆå–å‡ºä¿¡å·ï¼‰
- **æ¡ä»¶ï¼š** æ­»å‰ï¼ˆDeath Crossï¼‰
- **å®šä¹‰ï¼š** çŸ­æœŸå‡çº¿å‘ä¸‹ç©¿è¶Šé•¿æœŸå‡çº¿
- **æ“ä½œå»ºè®®ï¼š** è€ƒè™‘å–å‡ºæŒä»“

### HOLDï¼ˆæŒæœ‰ä¿¡å·ï¼‰
- **æ¡ä»¶ï¼š** æ— äº¤å‰å‘ç”Ÿ
- **å®šä¹‰ï¼š** çŸ­æœŸå‡çº¿å’Œé•¿æœŸå‡çº¿ä¿æŒåŸæœ‰ç›¸å¯¹ä½ç½®
- **æ“ä½œå»ºè®®ï¼š** ä¿æŒå½“å‰ä»“ä½

## ğŸ“ˆ ä¿¡å·å¼ºåº¦è®¡ç®—

ä¿¡å·å¼ºåº¦è¡¨ç¤ºå‡çº¿äº¤å‰çš„ç¨‹åº¦ï¼š

```java
// ä¹°å…¥ä¿¡å·å¼ºåº¦ = (MA5 - MA20) / MA20 * 100
// å–å‡ºä¿¡å·å¼ºåº¦ = (MA20 - MA5) / MA20 * 100
```

**å¼ºåº¦è§£è¯»ï¼š**
- 0-1%: å¼±ä¿¡å·
- 1-3%: ä¸­ç­‰ä¿¡å·
- 3%+: å¼ºä¿¡å·

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ç­–ç•¥ç”Ÿæˆ"æ•°æ®ä¸è¶³"ä¿¡å·
**åŸå› ï¼š** å†å²æ•°æ®å°‘äºé•¿æœŸå‡çº¿å‘¨æœŸï¼ˆé»˜è®¤20å¤©ï¼‰
**è§£å†³ï¼š** ç¡®ä¿æä¾›è‡³å°‘20ä¸ªä»¥ä¸Šçš„å†å²ä»·æ ¼æ•°æ®ç‚¹

### Q2: å‰ç«¯æ— æ³•è®¿é—®ç­–ç•¥é¡µé¢
**åŸå› ï¼š** è·¯ç”±æœªæ­£ç¡®é…ç½®æˆ–æœåŠ¡æœªå¯åŠ¨
**è§£å†³ï¼š**
1. ç¡®è®¤trading-serviceåœ¨8083ç«¯å£è¿è¡Œ
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰è·¨åŸŸé”™è¯¯
3. ç¡®è®¤è·¯ç”±é…ç½®æ­£ç¡®

### Q3: ç”Ÿæˆçš„ä¿¡å·éƒ½æ˜¯HOLD
**åŸå› ï¼š** å½“å‰æ²¡æœ‰å‡çº¿äº¤å‰å‘ç”Ÿ
**è§£å†³ï¼š** è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œåªæœ‰åœ¨äº¤å‰æ—¶æ‰ä¼šäº§ç”ŸBUY/SELLä¿¡å·

## ğŸš€ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

å®Œæˆæµ‹è¯•åï¼Œå¯ä»¥ç»§ç»­å¼€å‘ï¼š

1. **æ›´å¤šç­–ç•¥ç±»å‹**
   - MACDäº¤å‰ç­–ç•¥
   - RSIè¶…ä¹°è¶…å–ç­–ç•¥
   - å¸ƒæ—å¸¦çªç ´ç­–ç•¥

2. **å®æ—¶æ•°æ®é›†æˆ**
   - æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®ä¸ºçœŸå®å†å²æ•°æ®
   - é›†æˆmarket-data-serviceè·å–Kçº¿æ•°æ®

3. **è‡ªåŠ¨äº¤æ˜“å¼•æ“**
   - å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆæ¯5åˆ†é’Ÿæ‰«æä¸€æ¬¡ï¼‰
   - è‡ªåŠ¨æ‰§è¡Œäº¤æ˜“ä¿¡å·
   - äº¤æ˜“ç»“æœè®°å½•å’Œç»Ÿè®¡

4. **å›æµ‹ç³»ç»Ÿ**
   - å†å²æ•°æ®å›æµ‹
   - ç­–ç•¥æ”¶ç›Šç‡è®¡ç®—
   - å›æµ‹ç»“æœå¯è§†åŒ–

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œå¯ä»¥æ£€æŸ¥ï¼š
1. trading-serviceçš„æ—¥å¿—è¾“å‡º
2. æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networkå’ŒConsole
3. æ•°æ®åº“ä¸­strategieså’Œstrategy_signalsè¡¨çš„æ•°æ®
