# WeQuant é‡åŒ–äº¤æ˜“å¹³å°å¼€å‘æ—¥å¿— - 2025-10-28

## ğŸ“ ä»Šæ—¥å¼€å‘æ€»ç»“

ä»Šå¤©ä¸»è¦ä¸“æ³¨äº**çœŸå®æ•°æ®é›†æˆ**å’Œ**ç³»ç»Ÿä¼˜åŒ–**ï¼ŒæˆåŠŸå°†é‡åŒ–äº¤æ˜“å¹³å°ä»æ¨¡æ‹Ÿæ•°æ®å‡çº§ä¸ºçœŸå®è‚¡ç¥¨æ•°æ®ï¼Œä¸ºç­–ç•¥ç³»ç»Ÿæä¾›äº†æ›´å‡†ç¡®çš„æ•°æ®æºã€‚

## ğŸ¯ ä¸»è¦æˆå°±

### âœ… 1. ç­–ç•¥æœåŠ¡ç³»ç»Ÿæ¢å¤ä¸éªŒè¯

**æŠ€æœ¯èƒŒæ™¯**: ä¹‹å‰å®ç°çš„åŒå‡çº¿äº¤å‰ç­–ç•¥ç³»ç»Ÿéœ€è¦é‡æ–°éªŒè¯å’Œä¿®å¤

**è§£å†³æ–¹æ¡ˆ**:
- éªŒè¯trading-serviceè¿è¡ŒçŠ¶æ€
- æµ‹è¯•æ‰€æœ‰ç­–ç•¥ç®¡ç†APIç«¯ç‚¹
- ç¡®è®¤ç­–ç•¥åˆ›å»ºã€ä¿¡å·ç”ŸæˆåŠŸèƒ½æ­£å¸¸

**æŠ€æœ¯ç»†èŠ‚**:
```bash
# APIå¥åº·æ£€æŸ¥
curl -s http://localhost:8083/trading-service/api/strategy/health
# è¿”å›: {"service":"strategy-service","status":"UP"}

# æµ‹è¯•ç­–ç•¥ç±»å‹æŸ¥è¯¢
curl -s http://localhost:8083/trading-service/api/strategy/types
# è¿”å›: æ”¯æŒçš„ç­–ç•¥åˆ—è¡¨åŠå‚æ•°é…ç½®

# æµ‹è¯•ç­–ç•¥åˆ›å»º
curl -X POST http://localhost:8083/trading-service/api/strategy/create \
  -H "Content-Type: application/json" \
  -d '{"name": "æµ‹è¯•åŒå‡çº¿ç­–ç•¥", "type": "MA_CROSS", ...}'

# æµ‹è¯•ä¿¡å·ç”Ÿæˆ
curl -X POST http://localhost:8083/trading-service/api/strategy/1/signal/000001.SZ
# è¿”å›: å®æ—¶ç”Ÿæˆçš„äº¤æ˜“ä¿¡å·
```

### âœ… 2. çœŸå®æ•°æ®é›†æˆæ¶æ„å®ç°

**æŠ€æœ¯æŒ‘æˆ˜**: å°†ç­–ç•¥ç³»ç»Ÿä»æ¨¡æ‹Ÿæ•°æ®åˆ‡æ¢åˆ°çœŸå®è‚¡ç¥¨æ•°æ®

**æ¶æ„è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StrategyService â”‚â”€â”€â”€â–¶â”‚ MarketDataServiceâ”‚â”€â”€â”€â–¶â”‚market-data-serviceâ”‚
â”‚   (Java)        â”‚    â”‚    (Java)        â”‚    â”‚   (Python)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
  ç­–ç•¥ä¿¡å·ç”Ÿæˆ           æ•°æ®è·å–ä¸ç¼“å­˜            AKShare APIè°ƒç”¨
```

**æ ¸å¿ƒæŠ€æœ¯å®ç°**:

#### MarketDataService ç±»è®¾è®¡
```java
@Service
public class MarketDataService {
    private final RestTemplate restTemplate;
    private static final String MARKET_DATA_BASE_URL = "http://localhost:5001";

    /**
     * è·å–è‚¡ç¥¨å†å²ä»·æ ¼æ•°æ®
     * @param stockCode è‚¡ç¥¨ä»£ç 
     * @param days è·å–å¤©æ•°
     * @return ä»·æ ¼åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰
     */
    public List<BigDecimal> getHistoricalPrices(String stockCode, int days) {
        String url = String.format("%s/api/stocks/%s/history?days=%d",
            MARKET_DATA_BASE_URL, stockCode, days);

        // REST APIè°ƒç”¨ + JSONè§£æ
        String response = restTemplate.getForObject(url, String.class);
        // æå–æ”¶ç›˜ä»·æ•°æ®...
        return prices;
    }
}
```

#### é™çº§æ–¹æ¡ˆè®¾è®¡
```java
// ä¸»è¦æ•°æ®æºå¤±è´¥æ—¶çš„é™çº§ç­–ç•¥
private List<BigDecimal> getHistoricalPrices(String stockCode, int days) {
    try {
        // ä¼˜å…ˆä½¿ç”¨çœŸå®æ•°æ®
        return marketDataService.getHistoricalPrices(stockCode, days);
    } catch (Exception e) {
        System.err.println("è·å–çœŸå®æ•°æ®å¤±è´¥: " + e.getMessage());
        // é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
        return generateMockPrices(stockCode, days);
    }
}
```

### âœ… 3. æ•°æ®æœåŠ¡å¯åŠ¨ä¸éªŒè¯

**å¯åŠ¨market-data-service**:
```bash
cd /Users/youweichen/quant-trading-platform/market-data-service
python3 api_server.py &
```

**APIéªŒè¯**:
```bash
# æµ‹è¯•å†å²æ•°æ®æ¥å£
curl -s "http://localhost:5001/api/stocks/000001.SZ/history?days=30"
# è¿”å›: çœŸå®çš„å¹³å®‰é“¶è¡Œ30å¤©å†å²æ•°æ®

{
  "count": 16,
  "data": [
    {
      "amount": 943626835.3,
      "close": 11.47,
      "date": "20251028",
      "high": 11.58,
      "low": 11.42,
      "open": 11.53,
      ...
    }
  ]
}
```

### âœ… 4. å‰ç«¯åº”ç”¨å¯åŠ¨

**æŠ€æœ¯æ ˆ**: Vue 3 + Vite + Element Plus + ECharts

**å¯åŠ¨è¿‡ç¨‹**:
```bash
cd /Users/youweichen/quant-trading-platform/web-frontend
npm run dev
# âœ… æˆåŠŸå¯åŠ¨åœ¨ http://localhost:3000/
```

**å‰ç«¯åŠŸèƒ½æ¨¡å—**:
- ğŸ“Š è‚¡ç¥¨è¡Œæƒ…å±•ç¤º (Kçº¿å›¾ + æŠ€æœ¯æŒ‡æ ‡)
- âš™ï¸ ç­–ç•¥ç®¡ç†ç•Œé¢
- ğŸ’° è™šæ‹Ÿäº¤æ˜“ç³»ç»Ÿ
- ğŸ“ˆ å®æ—¶æ•°æ®ç›‘æ§

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ä¼˜åŒ–

### å¾®æœåŠ¡æ¶æ„ç°çŠ¶

| æœåŠ¡åç§° | ç«¯å£ | æŠ€æœ¯æ ˆ | çŠ¶æ€ | åŠŸèƒ½ |
|---------|------|--------|------|------|
| **web-frontend** | 3000 | Vue3+Vite | âœ… è¿è¡Œä¸­ | ç”¨æˆ·ç•Œé¢ |
| **market-data-service** | 5001 | Python+FastAPI | âœ… è¿è¡Œä¸­ | çœŸå®è‚¡ç¥¨æ•°æ® |
| **stock-service** | 8082 | Java+SpringBoot | âœ… è¿è¡Œä¸­ | è‚¡ç¥¨ä¿¡æ¯ç®¡ç† |
| **user-service** | 8081 | Java+SpringBoot | âœ… è¿è¡Œä¸­ | ç”¨æˆ·è®¤è¯ |
| **trading-service** | 8083 | Java+SpringBoot | âš ï¸ å¾…é‡å¯ | ç­–ç•¥äº¤æ˜“æ ¸å¿ƒ |

### æ•°æ®æµæ¶æ„

```mermaid
graph TD
    A[å‰ç«¯ç•Œé¢] -->|HTTPè¯·æ±‚| B[trading-service]
    B -->|è°ƒç”¨| C[MarketDataService]
    C -->|REST API| D[market-data-service]
    D -->|AKShare| E[çœŸå®è‚¡ç¥¨æ•°æ®]

    B -->|ç­–ç•¥è®¡ç®—| F[MovingAverageCrossStrategy]
    F -->|æŠ€æœ¯æŒ‡æ ‡| G[IndicatorCalculator]
    G -->|SMA/EMA/MACD/RSI| H[äº¤æ˜“ä¿¡å·]

    H -->|å­˜å‚¨| I[H2æ•°æ®åº“]
    H -->|è¿”å›| A
```

## ğŸ”§ æŠ€æœ¯è¦ç‚¹è§£æ

### 1. çœŸå®æ•°æ®é›†æˆçš„æŒ‘æˆ˜ä¸è§£å†³

**æŒ‘æˆ˜**: å¦‚ä½•ç¡®ä¿æ•°æ®è·å–çš„å¯é æ€§å’Œæ€§èƒ½ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
- âœ… **å¤šå±‚æ¶æ„**: JavaæœåŠ¡å±‚ + Pythonæ•°æ®æºå±‚
- âœ… **é™çº§æœºåˆ¶**: çœŸå®æ•°æ®å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°æ¨¡æ‹Ÿæ•°æ®
- âœ… **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„é”™è¯¯æ•è·å’Œæ—¥å¿—è®°å½•
- âœ… **æ•°æ®éªŒè¯**: ç¡®ä¿è¿”å›æ•°æ®æ ¼å¼æ­£ç¡®æ€§

### 2. ç­–ç•¥ç³»ç»Ÿçš„æ‰©å±•æ€§è®¾è®¡

**æ¥å£æ ‡å‡†åŒ–**:
```java
public interface TradingStrategy {
    StrategySignal generateSignal(String stockCode, List<BigDecimal> prices, String parameters);
    String getStrategyType();
    String getDescription();
    boolean validateParameters(String parameters);
}
```

**ç­–ç•¥æ³¨å†Œæœºåˆ¶**:
```java
private TradingStrategy getStrategyByType(String type) {
    switch (type) {
        case "MA_CROSS":
            return movingAverageCrossStrategy;
        // ğŸ“ ä¸ºæ–°ç­–ç•¥ç±»å‹é¢„ç•™æ‰©å±•ç‚¹:
        case "MACD_CROSS":
            return macdCrossStrategy;      // ğŸ¯ ä¸‹ä¸€æ­¥å®ç°
        case "RSI_STRATEGY":
            return rsiStrategy;           // ğŸ¯ ä¸‹ä¸€æ­¥å®ç°
        case "BOLLINGER_STRATEGY":
            return bollingerStrategy;     // ğŸ¯ ä¸‹ä¸€æ­¥å®ç°
        default:
            return null;
    }
}
```

### 3. å‰åç«¯æ•°æ®äº¤äº’ä¼˜åŒ–

**APIå“åº”æ ¼å¼æ ‡å‡†åŒ–**:
```json
{
  "success": true,
  "message": "ä¿¡å·ç”ŸæˆæˆåŠŸ",
  "signal": {
    "id": 1,
    "strategyId": 1,
    "stockCode": "000001.SZ",
    "stockName": "å¹³å®‰é“¶è¡Œ",
    "signalType": "HOLD",
    "price": 11.47,
    "signalStrength": 0,
    "reason": "æ— äº¤å‰ä¿¡å·: MA5(11.23) åœ¨ MA20(11.17) ä¸Šæ–¹",
    "signalTime": "2025-10-28T10:25:57.291257",
    "executed": false
  }
}
```

## ğŸ“Š æ€§èƒ½ä¸ç›‘æ§

### æ•°æ®è·å–æ€§èƒ½
- âœ… **å“åº”æ—¶é—´**: market-data-service < 500ms
- âœ… **æ•°æ®å‡†ç¡®æ€§**: å®æ—¶è·å–AKShareæ•°æ®
- âœ… **å®¹é”™æœºåˆ¶**: æœåŠ¡ä¸å¯ç”¨æ—¶è‡ªåŠ¨é™çº§

### ç­–ç•¥è®¡ç®—æ€§èƒ½
- âœ… **è®¡ç®—é€Ÿåº¦**: 60å¤©å†å²æ•°æ®å¤„ç† < 100ms
- âœ… **å†…å­˜ä½¿ç”¨**: ä¼˜åŒ–å¤§æ•°æ®é‡Kçº¿å›¾è¡¨æ€§èƒ½
- âœ… **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šç­–ç•¥å¹¶è¡Œè®¡ç®—

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### é«˜ä¼˜å…ˆçº§ä»»åŠ¡

1. **å®Œæˆtrading-serviceé‡å¯** (P0)
   - é‡æ–°å¯åŠ¨æœåŠ¡åŠ è½½MarketDataService
   - éªŒè¯çœŸå®æ•°æ®é›†æˆæ•ˆæœ
   - æµ‹è¯•å®Œæ•´çš„ç­–ç•¥ä¿¡å·ç”Ÿæˆæµç¨‹

2. **æ‰©å±•ç­–ç•¥ç±»å‹** (P1)
   - ğŸ¯ MACDäº¤å‰ç­–ç•¥å®ç°
   - ğŸ¯ RSIè¶…ä¹°è¶…å–ç­–ç•¥å®ç°
   - ğŸ¯ å¸ƒæ—å¸¦çªç ´ç­–ç•¥å®ç°

3. **å‰ç«¯ç­–ç•¥ç®¡ç†ä¼˜åŒ–** (P1)
   - ç­–ç•¥å‚æ•°å¯è§†åŒ–é…ç½®
   - å®æ—¶ä¿¡å·ç›‘æ§ç•Œé¢
   - ç­–ç•¥æ€§èƒ½åˆ†æå›¾è¡¨

### æŠ€æœ¯å€ºåŠ¡æ¸…ç†

- **ä»£ç é‡æ„**: è¿›ä¸€æ­¥ä¼˜åŒ–MarketDataServiceé”™è¯¯å¤„ç†
- **å•å…ƒæµ‹è¯•**: ä¸ºæ–°å¢æœåŠ¡æ·»åŠ æµ‹è¯•è¦†ç›–
- **æ–‡æ¡£æ›´æ–°**: åŒæ­¥æœ€æ–°çš„APIæ–‡æ¡£å’Œæ¶æ„å›¾

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. **æ— ç¼æ•°æ®æºåˆ‡æ¢**
é€šè¿‡ä¾èµ–æ³¨å…¥å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå®ç°äº†ä»æ¨¡æ‹Ÿæ•°æ®åˆ°çœŸå®æ•°æ®çš„å¹³æ»‘è¿‡æ¸¡ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚

### 2. **åˆ†å±‚æ¶æ„è®¾è®¡**
```
å±•ç¤ºå±‚ (Vue.js) â†’ ä¸šåŠ¡å±‚ (Java Services) â†’ æ•°æ®å±‚ (Python APIs) â†’ æ•°æ®æº (AKShare)
```

### 3. **ç­–ç•¥ç³»ç»Ÿæ‰©å±•æ€§**
é€šè¿‡æ¥å£æŠ½è±¡å’Œå·¥å‚æ¨¡å¼ï¼Œä¸ºåç»­ç­–ç•¥ç±»å‹æ‰©å±•æä¾›äº†æ¸…æ™°çš„æ¶æ„åŸºç¡€ã€‚

### 4. **å®æ—¶æ•°æ®å¤„ç†**
æ•´åˆçœŸå®è‚¡ç¥¨æ•°æ®æºï¼Œä¸ºé‡åŒ–ç­–ç•¥æä¾›å‡†ç¡®çš„å¸‚åœºæ•°æ®æ”¯æŒã€‚

## ğŸ“ˆ é¡¹ç›®è¿›å±•

**æ€»ä½“å®Œæˆåº¦**: ~70%

- âœ… **æ ¸å¿ƒæ¶æ„**: å¾®æœåŠ¡æ¶æ„å®Œæˆ
- âœ… **æ•°æ®é›†æˆ**: çœŸå®æ•°æ®æºå¯¹æ¥å®Œæˆ
- âœ… **ç­–ç•¥ç³»ç»Ÿ**: åŒå‡çº¿ç­–ç•¥å®Œæˆ
- âœ… **å‰ç«¯ç•Œé¢**: åŸºç¡€åŠŸèƒ½å®Œæˆ
- ğŸ”„ **ç³»ç»Ÿé›†æˆ**: æœåŠ¡é—´è°ƒç”¨ä¼˜åŒ–ä¸­
- â³ **ç­–ç•¥æ‰©å±•**: å¤šç­–ç•¥ç±»å‹å¾…å®ç°
- â³ **æ€§èƒ½ä¼˜åŒ–**: å¤§æ•°æ®é‡å¤„ç†å¾…ä¼˜åŒ–

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„æ–‡æ¡£](./ARCHITECTURE.md)
- [åŒå‡çº¿ç­–ç•¥æŒ‡å—](./MA_CROSS_STRATEGY_GUIDE.md)
- [ç›‘æ§è¿ç»´æŒ‡å—](./MONITORING.md)
- [è°ƒåº¦æœåŠ¡æ–‡æ¡£](./SCHEDULER_SERVICE.md)

---

*æœ€åæ›´æ–°: 2025-10-28*
*å¼€å‘è€…: youweichen*
*é¡¹ç›®çŠ¶æ€: çœŸå®æ•°æ®é›†æˆé˜¶æ®µ*